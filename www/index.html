<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <meta name="referrer" content="no-referrer">
    
    <meta name="color-scheme" content="light only">
    <meta name="theme-color" content="#F7F7F9">
    
    <title>Perchel - Premium Gastronomy Journal</title>
    
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/images/logo.png">
    
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=1bf29ed9131417186b665259385414f8&libraries=services&autoload=false"></script>
    
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="splash-screen">
        <div class="splash-content">
            <div class="splash-logo-wrapper"><div class="splash-logo">perchel<span class="dot">.</span></div></div>
            <div class="splash-line"></div>
            <div class="splash-sub">Premium Gastronomy Journal</div>
        </div>
    </div>

    <div id="pwa-install-banner">
        <div style="display:flex; align-items:center; gap:12px;">
            <div style="width:36px; height:36px; background:white; border-radius:10px; display:flex; justify-content:center; align-items:center; font-weight:900; color:var(--brand-primary);">P.</div>
            <div>
                <div style="font-size:13px; font-weight:800;">퍼슐 앱 설치하기</div>
                <div style="font-size:11px; color:rgba(255,255,255,0.8);">바탕화면에서 터치 한 번에 접속하세요</div>
            </div>
        </div>
        <button class="pwa-btn" id="pwa-install-btn">설치</button>
    </div>

    <div id="login-section" style="display: none; height: 100vh; flex-direction: column; align-items: center; justify-content: center; padding: 20px; position: relative; z-index: 99999; background: var(--bg-main);">
        <div style="width: 80px; height: 80px; background: var(--brand-primary); border-radius: 24px; display: flex; justify-content: center; align-items: center; color: white; font-size: 42px; font-weight: 900; font-style: italic; margin-bottom: 40px; box-shadow: var(--shadow-soft);">
            p.
        </div>
        <h1 data-ko="퍼슐 입장" data-en="Enter Perchel" style="color: var(--text-main); font-size: 28px; font-weight: 800; margin-bottom: 40px; letter-spacing: -0.5px;">
            퍼슐 입장
        </h1>
        <div style="width: 100%; max-width: 320px;">
            
            <div class="social-login-container" style="display: flex; flex-direction: column; gap: 12px; margin-top: 20px;">
                
                <button class="btn-google" onclick="triggerGoogleLogin()" style="width: 100%; height: 52px; background: #FFFFFF; color: #3c4043; border: 1px solid #dadce0; border-radius: 12px; font-weight: 700; font-size: 15px; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);">
                    <svg viewBox="0 0 24 24" width="20" height="20" style="margin-right: 8px;">
                        <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/>
                        <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                        <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                        <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                    </svg>
                    <span data-ko="구글로 1초 로그인" data-en="Continue with Google">구글로 1초 로그인</span>
                </button>

                <button class="btn-kakao" onclick="alert('현재 카카오 로그인 서비스 장애로 점검 중입니다. 상단의 구글 로그인을 이용해주세요.')" style="width: 100%; height: 52px; background: #F4F4F4; color: #999999; border: none; border-radius: 12px; font-weight: 700; font-size: 15px; display: flex; align-items: center; justify-content: center; cursor: not-allowed;">
                    <svg viewBox="0 0 24 24" width="20" height="20" style="margin-right: 8px; fill: #999999;">
                        <path d="M12 3c-5.523 0-10 3.535-10 7.896 0 2.825 1.83 5.3 4.632 6.703-.306 1.135-1.11 4.148-1.14 4.31-.035.195.14.19.223.136.068-.044 3.593-2.457 5.044-3.486.41.037.828.058 1.25.058 5.523 0 10-3.535 10-7.896C22 6.535 17.523 3 12 3z"/>
                    </svg>
                    <span data-ko="카카오 로그인 (점검 중)" data-en="Kakao Login (Maintenance)">카카오 로그인 (점검 중)</span>
                </button>
                
                <div style="display: none;">
                    <div id="g_id_onload"
                         data-client_id="725138598590-gjhd8dduh3ag3922il5pcrf15q1rjvvn.apps.googleusercontent.com"
                         data-context="signin"
                         data-ux_mode="popup"
                         data-callback="handleGoogleLogin"
                         data-auto_prompt="false">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="main-content">
        <header class="top-bar transparent" id="main-top-bar">
            <div class="top-bar-content">
                <div class="top-logo" onclick="switchTab('home')">perchel</div>
                <div style="display:flex; align-items:center; gap: 14px;">
                    <select id="global-region-select" onchange="changeGlobalRegion()">
                        <option value="national" data-ko="전국" data-en="National">전국</option>
                        <option value="서울">서울</option><option value="부산">부산</option><option value="대구">대구</option><option value="인천">인천</option><option value="광주">광주</option><option value="대전">대전</option><option value="울산">울산</option><option value="세종">세종</option><option value="경기">경기</option><option value="강원">강원</option><option value="충북">충북</option><option value="충남">충남</option><option value="전북">전북</option><option value="전남">전남</option><option value="경북">경북</option><option value="경남">경남</option><option value="제주">제주</option>
                    </select>

                    <div class="mentor-btn" onclick="switchTab('network')" title="나의 미식멘토">
                        👑 <span data-ko="M" data-en="M">M</span>
                    </div>

                    <div onclick="openGlobalSearchModal()" style="cursor:pointer; display:flex; align-items:center; justify-content:center;" title="메뉴/식당 검색"><svg class="svg-icon" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></div>
                    <div style="position:relative; cursor:pointer; display:flex; align-items:center; justify-content:center;" onclick="openNotificationModal()" title="내 소식"><svg class="svg-icon" viewBox="0 0 24 24"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg><div id="noti-badge" class="noti-badge"></div></div>
                    <div id="lang-toggle" class="lang-toggle" onclick="toggleLanguage()">EN</div>
                    <div onclick="handleLogout()" style="cursor:pointer; display:flex; align-items:center; justify-content:center;" title="로그아웃"><svg class="svg-icon" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg></div>
                </div>
            </div>
        </header>

        <div id="home-view" class="tab-view" style="display:block;">
            <div class="home-top-banner">
                <div class="home-top-banner-title" data-ko="오늘의 미식<br>큐레이션" data-en="Today's<br>Curation">오늘의 미식<br>큐레이션</div>
                <div class="home-top-banner-sub" data-ko="가장 트렌디한 다이닝 경험을 확인하세요" data-en="Discover trendy dining experiences">가장 트렌디한 다이닝 경험을 확인하세요</div>
            </div>
            <div class="home-section-container">
                <div class="section-title" id="home-editor-title" data-ko="인기 미식가" data-en="Featured Gourmets">인기 미식가</div>
                <div class="editor-row" id="editor-list-container"></div>
                <div class="section-title" style="margin-top:40px;" data-ko="인기 맛집 포트폴리오" data-en="Popular Places">인기 맛집 포트폴리오</div>
                <div class="card-grid" id="popular-list-container"></div>
                <div class="section-title" style="margin-top:40px;" data-ko="최근 등록된 식당" data-en="Recently Added">최근 등록된 식당</div>
                <div class="card-grid" id="new-list-container"></div>
            </div>
        </div>

        <div id="network-view" class="tab-view" style="display:none; padding-top:80px;">
            <div style="padding: 10px 0;">
                <h2 style="font-size: 26px; font-weight: 900; margin-bottom: 5px; color: var(--text-main);" data-ko="나의 미식멘토" data-en="My Mentors">나의 미식멘토</h2>
                <div style="font-size:13px; color:var(--text-sub); margin-bottom:30px;" data-ko="최고의 미식가들을 팔로우하고 서열표를 확인하세요." data-en="Follow top gourmets and check their tier lists.">최고의 미식가들을 팔로우하고 서열표를 확인하세요.</div>
                <div class="section-title" data-ko="팔로잉" data-en="Following">팔로잉</div>
                <div id="following-list-container"></div>
                <div class="section-title" style="margin-top:40px;" data-ko="추천 미식가" data-en="Recommended Gourmets">추천 미식가</div>
                <div id="recommended-list-container"></div>
            </div>
        </div>

        <div id="explore-view" class="tab-view" style="display:none; padding-top:80px;">
            <div style="display:flex; gap:10px; margin-bottom:20px; justify-content:center;">
                <button id="tab-explore-ranking" onclick="switchExploreTab('ranking')" class="btn-primary" style="flex:1; background:var(--brand-primary);">맛집 인기순</button>
                <button id="tab-explore-feed" onclick="switchExploreTab('feed')" class="btn-primary" style="flex:1; background:#EAEAEA; color:#111;">실시간 피드</button>
            </div>
            <div id="explore-ranking-area">
                <input type="text" id="ranking-search-input" class="input-field" placeholder="메뉴나 식당 이름을 검색하세요 🔍" onkeyup="if(event.keyCode==13) fetchRankingData()">
                <div style="font-size:12px; color:var(--text-sub); margin-bottom:16px; text-align:center;">아무것도 입력하지 않고 돋보기를 누르면 '전체 랭킹'이 표시됩니다.</div>
                <button class="btn-primary" style="margin-bottom:24px; padding:16px;" onclick="fetchRankingData()">검색 및 랭킹 확인</button>
                <div id="ranking-list-container"></div>
            </div>
            <div id="explore-feed-area" style="display:none;"><div id="feed-scroll-area"></div></div>
        </div>
        
        <div id="map-view" class="tab-view" style="display:none; height: 100vh; padding: 60px 0 0 0;">
            <div id="global-map" style="width:100%; height:100%; background:#eee;"></div>
            <div class="my-location-btn" style="position: absolute; bottom: 100px; right: 20px; width: 44px; height: 44px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 10; cursor: pointer; border: 1px solid var(--border-color);" onclick="moveToMyLocation()" title="내 위치로 이동">
                <svg class="svg-icon" viewBox="0 0 24 24" style="stroke:var(--brand-fab);"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg>
            </div>
        </div>

        <div id="profile-view" class="tab-view" style="display:none; padding-top:60px; padding-left:0; padding-right:0;">
            <div id="profile-header-target"></div>
            <div style="padding: 0 24px;">
                <div id="registration-trigger" style="background:var(--bg-card); border: 1px dashed var(--border-color); border-radius:var(--radius-xl); padding:24px; margin-bottom:24px; text-align:center; cursor: pointer; transition: 0.3s; box-shadow:var(--shadow-soft);" onclick="openSearchModal()">
                    <div style="font-size: 28px; color: var(--brand-fab); margin-bottom: 8px;">+</div>
                    <div data-ko="새로운 미식 경험 기록하기" data-en="Log new experience" style="font-size: 14px; font-weight: 800; color: var(--brand-primary);">새로운 미식 경험 기록하기</div>
                </div>
                <div id="guide-controls-target" class="guide-controls" style="display:none; margin-bottom:20px;">
                    <input type="text" id="guide-search-input" class="input-field" data-ph-ko="서열표 내 식당 검색..." data-ph-en="Search in guide..." placeholder="서열표 내 식당 검색..." onkeyup="renderGuideSheet()">
                </div>
                <div id="michelin-tables-target"></div>
            </div>
        </div>

        <nav class="bottom-nav">
            <div class="nav-item active" id="m-home" onclick="switchTab('home')"><svg class="nav-icon svg-icon" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2-2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg><span data-ko="홈" data-en="Home">홈</span></div>
            <div class="nav-item" id="m-map" onclick="switchTab('map')"><svg class="nav-icon svg-icon" viewBox="0 0 24 24"><polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon><line x1="8" y1="2" x2="8" y2="18"></line><line x1="16" y1="6" x2="16" y2="22"></line></svg><span data-ko="내주변" data-en="Map">내주변</span></div>
            <div class="nav-fab-wrapper"><div class="nav-fab" onclick="openSearchModal()"><svg viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></div></div>
            <div class="nav-item" id="m-explore" onclick="switchTab('explore')"><svg class="nav-icon svg-icon" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><span data-ko="탐색" data-en="Explore">탐색</span></div>
            <div class="nav-item" id="m-profile" onclick="switchTab('profile')"><svg class="nav-icon svg-icon" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg><span data-ko="내 프로필" data-en="Profile">내 프로필</span></div>
        </nav>
    </div>

    <div id="search-modal" class="bottom-modal">
        <div class="modal-body" style="height: 85vh;">
            <div style="padding:24px 24px 16px; display:flex; justify-content:space-between; align-items:center;">
                <h2 style="font-weight:800; font-size:20px; color:var(--brand-primary);" data-ko="장소 찾기" data-en="Search Place">장소 찾기</h2>
                <div onclick="closeSearchModal()" style="cursor:pointer; color:var(--text-sub);"><svg class="svg-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></div>
            </div>
            <div style="padding:0 24px 24px; flex:1; overflow-y:auto; display:flex; flex-direction:column; position: relative;">
                <input type="text" id="search-keyword" class="input-field" data-ph-ko="식당 이름 입력 후 Enter" data-ph-en="Search name and Enter" placeholder="식당 이름 입력 후 Enter" onkeypress="if(event.keyCode==13) executeKakaoSearch()">
                <div id="search-results-target" style="flex:1; margin-top:10px;"></div>
            </div>
        </div>
    </div>
    <div id="global-search-modal" class="bottom-modal" style="z-index: 2100;">
        <div class="modal-body" style="height: 90vh;">
            <div style="padding:24px 24px 16px; display:flex; justify-content:space-between; align-items:center;">
                <h2 style="font-weight:800; font-size:20px; color:var(--brand-primary);">🔍 메뉴 & 랭킹 검색</h2>
                <div onclick="closeGlobalSearchModal()" style="cursor:pointer; color:var(--text-sub);">
                    <svg class="svg-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </div>
            </div>
            <div style="padding:0 24px 24px; flex:1; overflow-y:auto; display:flex; flex-direction:column;">
                <input type="text" id="global-ranking-input" class="input-field" style="border:1px solid var(--brand-primary);" placeholder="예: 파스타, 돼지갈비, 오마카세..." onkeyup="if(event.keyCode==13) executeGlobalSearch()">
                <button class="btn-primary" style="margin-bottom:20px; padding:16px;" onclick="executeGlobalSearch()">검색하기</button>
                <div id="global-search-results" style="flex:1;">
                    <div style="text-align:center; padding:40px 20px; color:var(--text-sub); font-size:13px;">
                        원하시는 메뉴나 식당 이름을 검색하시면<br>가장 많이 등록된 순서대로 랭킹을 보여드립니다.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="notification-modal" class="bottom-modal" style="z-index: 2200;">
        <div class="modal-body" style="height: 75vh;">
            <div style="padding:24px 24px 16px; display:flex; justify-content:space-between; align-items:center;">
                <h2 style="font-weight:800; font-size:20px; color:var(--brand-primary);">🔔 내 소식</h2>
                <div onclick="closeNotificationModal()" style="cursor:pointer; color:var(--text-sub);">
                    <svg class="svg-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </div>
            </div>
            <div style="padding:0; flex:1; overflow-y:auto;" id="notification-list-target">
                <div style="text-align:center; padding:40px 20px; color:var(--text-sub); font-size:13px;">알림을 불러오는 중입니다...</div>
            </div>
        </div>
    </div>

    <div id="post-detail-modal" class="bottom-modal" style="z-index: 2300;">
        <div class="modal-body" style="height: 90vh; padding: 30px 24px; overflow-y: auto;">
            <div style="font-weight: 800; font-size: 20px; margin-bottom: 24px; display: flex; justify-content: space-between; align-items: center; color: var(--brand-primary);">
                <span data-ko="새로운 등기" data-en="New Entry">새로운 등기</span>
                <div onclick="cancelPosting()" style="cursor:pointer; color:var(--text-sub);">
                    <svg class="svg-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </div>
            </div>
            
            <div class="preview-container">
                <div id="selected-rest-photo" style="width:100%; height:200px; background-size:cover; background-position:center; border-radius:16px; margin-bottom:12px; position:relative; overflow:hidden; border: 1px solid var(--border-color);"></div>
                <div id="map-preview-area" style="width:100%; height:150px; border-radius:16px; margin-bottom:12px; border: 1px solid var(--border-color);"></div>
            </div>
            
            <div id="selected-info-text" style="background:var(--bg-main); padding:18px; border-radius:12px; margin-bottom:20px; border: 1px solid var(--border-color);"></div>
            
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 8px;">
                <div style="font-size: 12px; font-weight: 700; color: var(--text-sub); text-transform:uppercase;" data-ko="미식평" data-en="Description">미식평</div>
                <button onclick="recommendAIComment()" style="background:rgba(255,90,32,0.1); border:1px solid var(--brand-fab); color:var(--brand-fab); border-radius:12px; padding:6px 12px; font-size:10px; font-weight:800; cursor:pointer; transition:0.2s;">
                    ✨ AI 큐레이션
                </button>
            </div>
            
            <input type="text" id="post-comment" class="input-field" data-ph-ko="이 곳에서의 경험을 한 줄로 적어주세요." data-ph-en="Write your experience..." placeholder="이 곳에서의 경험을 한 줄로 적어주세요.">
            
            <div style="display:flex; justify-content:space-between; align-items:center; margin-top:10px; padding-bottom: 40px;">
                <div style="flex:1;">
                    <div style="font-size: 11px; font-weight: 600; color: var(--text-sub); margin-bottom: 8px;" data-ko="사진 업로드 (다중 선택 가능)" data-en="Upload Photos (Multiple)">사진 업로드 (다중 선택 가능)</div>
                    <input type="file" id="post-image" accept="image/*" multiple style="font-size:12px; color:var(--text-sub);" onchange="handleImagePreview(this)">
                </div>
                <button onclick="executeAddRestaurant()" class="btn-primary" style="width: auto; padding: 14px 28px;" data-ko="저장" data-en="Save">저장</button>
            </div>
            
            <input type="hidden" id="h-name">
            <input type="hidden" id="h-cat">
            <input type="hidden" id="h-addr">
            <input type="hidden" id="h-id">
            <input type="hidden" id="h-x">
            <input type="hidden" id="h-y">
            <input type="hidden" id="h-phone">
        </div>
    </div>

    <div id="restaurant-detail-modal" class="bottom-modal" style="z-index: 2400;">
        <div class="modal-body" style="height: 90vh; padding: 0; overflow-y:auto;">
            <div id="detail-view-card" style="padding: 30px 24px;">
                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 24px;">
                    <span class="tag-pill" id="detail-tier" style="font-size:13px; padding:6px 14px; background:var(--brand-yellow); color:#000;"></span>
                    <div style="display:flex; gap: 15px; align-items:center;">
                        
                        <div id="delete-rest-btn" onclick="executeDeleteRestaurant()" style="display:none; cursor:pointer; color:#FF4757;" title="기록 삭제">
                            <svg class="svg-icon" viewBox="0 0 24 24" style="stroke:#FF4757; width:24px; height:24px;">
                                <polyline points="3 6 5 6 21 6"></polyline>
                                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            </svg>
                        </div>
                        
                        <div onclick="closeRestDetail()" style="cursor:pointer; color:var(--text-sub);">
                            <svg class="svg-icon" viewBox="0 0 24 24" style="width:28px; height:28px; stroke:var(--brand-primary);"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </div>
                    </div>
                </div>
                
                <div id="detail-img" class="detail-main-img" style="background-position:center; background-size:cover; background-color:#eee; position:relative; overflow:hidden; border: 1px solid var(--border-color); border-radius: 16px; aspect-ratio: 4/3;">
                    <button id="ai-sync-btn" style="position:absolute; bottom:12px; right:12px; background:rgba(0,0,0,0.8); color:var(--brand-fab); border:1px solid var(--brand-fab); padding:8px 14px; border-radius:20px; font-size:11px; font-weight:800; cursor:pointer; backdrop-filter:blur(4px); display:none; transition:0.2s; box-shadow: 0 4px 10px rgba(0,0,0,0.5); z-index:20;">
                        ✨ AI 사진 변경
                    </button>
                </div>

                <h2 id="detail-name" style="font-size:28px; font-weight:900; margin-bottom:12px; margin-top: 20px; color:var(--brand-primary); letter-spacing:-0.5px;"></h2>
                
                <div style="display:flex; gap:8px; margin-bottom:24px; flex-wrap:wrap;">
                    <span class="tag-pill tag-orange" id="detail-category" style="padding: 4px 10px; border-radius: 12px; font-size: 11px;"></span>
                    <span class="tag-pill tag-green" id="detail-address" style="padding: 4px 10px; border-radius: 12px; font-size: 11px;"></span>
                    <span class="tag-pill tag-pink" id="detail-phone" style="display:none; padding: 4px 10px; border-radius: 12px; font-size: 11px;"></span>
                </div>
                
                <div style="background:var(--bg-main); padding:24px; border-radius:20px; margin-bottom:30px; border: 1px solid var(--border-color);">
                    <div style="font-size:11px; color:var(--text-sub); font-weight:800; margin-bottom:12px; text-transform:uppercase; letter-spacing:1px;" data-ko="미식가 코멘트" data-en="Editor's Comment">미식가 코멘트</div>
                    <div id="detail-comment" style="font-size:16px; font-weight:500; color:var(--text-main); line-height: 1.6; font-style: italic;"></div>
                    
                    <div style="display:flex; align-items:center; gap:10px; margin-top:20px;">
                        <div id="detail-owner" style="display:inline-block; padding:8px 14px; background:white; border-radius:12px; font-size:12px; font-weight:700; color:var(--brand-primary); cursor:pointer; border: 1px solid var(--border-color);"></div>
                        <button id="detail-follow-btn" style="display:none; padding:8px 16px; background:var(--brand-fab); color:white; border-radius:12px; border:none; font-size:12px; font-weight:800; cursor:pointer; box-shadow: 0 4px 15px rgba(255,90,32,0.3); transition:0.2s;"></button>
                    </div>
                </div>
                
                <div style="font-size: 12px; font-weight: 800; margin-bottom: 12px; color: var(--text-sub); text-transform:uppercase; letter-spacing:1px;" data-ko="위치 정보" data-en="Location Info">위치 정보</div>
                <div id="detail-map-area" style="width:100%; height:250px; border-radius:20px; margin-bottom:30px; border: 1px solid var(--border-color); background: #eee;"></div>
                
                <button id="detail-kakao-btn" class="btn-primary" style="background:var(--brand-primary); color:#FFF; display:flex; justify-content:center; align-items:center; gap:10px; margin-bottom: 50px; box-shadow:none;" data-ko="상세 정보 및 메뉴 보기" data-en="View Info & Menu">상세 정보 및 메뉴 보기</button>
            </div>
        </div>
    </div>

    <div id="edit-profile-modal" class="bottom-modal" style="z-index: 2500;">
        <div class="modal-body" style="height: auto; min-height: 50vh; padding: 30px 24px; overflow-y:auto;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 24px;">
                <h2 style="font-weight:800; font-size:20px; color:var(--brand-primary);">프로필 수정</h2>
                <div onclick="closeEditProfileModal()" style="cursor:pointer; color:var(--text-sub);">
                    <svg class="svg-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </div>
            </div>
            
            <div style="font-size: 12px; font-weight: 700; color: var(--text-sub); margin-bottom: 8px;">새로운 프로필 이름 (닉네임)</div>
            <input type="text" id="edit-nickname-input" class="input-field" placeholder="변경할 닉네임을 입력하세요.">
            
            <div style="font-size: 12px; font-weight: 700; color: var(--text-sub); margin-bottom: 8px; margin-top: 10px;">나만의 미식 철학 (Quote)</div>
            <input type="text" id="edit-philosophy-input" class="input-field" placeholder="예: 음식은 혀가 아니라 분위기로 먹는 것이다">

            <div style="font-size: 12px; font-weight: 700; color: var(--text-sub); margin-bottom: 8px; margin-top: 10px;">미식 DNA 태그 (쉼표로 구분)</div>
            <input type="text" id="edit-dna-input" class="input-field" placeholder="예: 파인다이닝, 노포매니아, 와인러버">

            <div style="font-size: 12px; font-weight: 700; color: var(--text-sub); margin-bottom: 8px; margin-top: 10px;">기타 개인정보</div>
            <textarea id="edit-personal-info" class="input-field" placeholder="자기소개나 추가 개인정보를 입력할 수 있는 공간입니다." style="height: 80px; resize: none;"></textarea>
            
            <button onclick="submitProfileEdit()" class="btn-primary" style="margin-top: 20px;">저장하기</button>
        </div>
    </div>

    <div id="ai-image-modal" class="bottom-modal" style="z-index: 2600;">
        <div class="modal-body" style="height: auto; min-height: 50vh; padding: 30px 24px;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom: 8px;">
                <h2 style="font-weight:800; font-size:20px; color:var(--brand-primary);">✨ AI 사진 큐레이션</h2>
                <div onclick="document.getElementById('ai-image-modal').style.display='none'" style="cursor:pointer; color:var(--text-sub);">
                    <svg class="svg-icon" viewBox="0 0 24 24"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </div>
            </div>
            <div style="font-size:13px; color:var(--text-sub); margin-bottom:20px;">서버가 실시간으로 수집한 고화질 이미지 중<br>대표 사진으로 사용할 이미지를 선택하세요.</div>
            <div id="ai-image-target" class="ai-image-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>